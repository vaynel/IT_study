## 1ï¸âƒ£ ì˜¬ë°”ë¥¸ ì‹¤í–‰ ëª…ë ¹ (Cloudflare DNS + ì™€ì¼ë“œì¹´ë“œ)

```bash
sudo certbot certonly \
  --dns-cloudflare \
  --dns-cloudflare-credentials ~/.secrets/cloudflare.ini \
  --preferred-challenges dns-01 \
  -d dev.mandu.log2u.me \
  -d "*.dev.mandu.log2u.me"
```

> ğŸ”¹ **ì™€ì¼ë“œì¹´ë“œ(`*.`) ì¸ì¦ì„œëŠ” ë°˜ë“œì‹œ `dns-01`ë§Œ ê°€ëŠ¥**
> ğŸ”¹ `--preferred-challenges`ëŠ” ì„ íƒì´ì§€ë§Œ, ëª…ì‹œí•´ë‘ëŠ” ê²Œ ì•ˆì „

---

## 2ï¸âƒ£ Cloudflare credentials íŒŒì¼ í•„ìˆ˜ ì¡°ê±´

```bash
cat ~/.secrets/cloudflare.ini
```

ë‚´ìš© ì˜ˆì‹œ:

```ini
dns_cloudflare_api_token = CF_API_TOKEN_VALUE
```

ê¶Œí•œ **ë°˜ë“œì‹œ 600** ì´ì–´ì•¼ í•¨:

```bash
chmod 600 ~/.secrets/cloudflare.ini
```

ê¶Œí•œ ì•ˆ ë§ìœ¼ë©´ ë‹¤ìŒ ì—ëŸ¬ ë°œìƒ:

```
Unsafe permissions on credentials configuration file
```

---

## 3ï¸âƒ£ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ í™•ì¸ (ì¤‘ìš”)

```bash
certbot plugins
```

ì¶œë ¥ì— ì•„ë˜ê°€ **ìˆì–´ì•¼ ì •ìƒ**:

```
* dns-cloudflare
```

ì—†ìœ¼ë©´ ì„¤ì¹˜:

```bash
sudo apt update
sudo apt install -y python3-certbot-dns-cloudflare
```

---

## 4ï¸âƒ£ ì„±ê³µ ì‹œ ê²°ê³¼ ìœ„ì¹˜

ì¸ì¦ì„œ ë°œê¸‰ë˜ë©´:

```text
/etc/letsencrypt/live/dev.mandu.log2u.me/
â”œâ”€â”€ fullchain.pem
â”œâ”€â”€ privkey.pem
```

---

## 5ï¸âƒ£ ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ ìš”ì•½

| ì‹¤ìˆ˜                | ì„¤ëª…                        |
| ----------------- | ------------------------- |
| `dns-d`           | âŒ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì±Œë¦°ì§€             |
| wildcardì— http-01 | âŒ ë¶ˆê°€ëŠ¥                     |
| cloudflare.ini ê¶Œí•œ | âŒ 600 ì•„ë‹ˆë©´ ì‹¤íŒ¨              |
| API Key ì‚¬ìš©        | âš ï¸ ê°€ëŠ¥í•˜ì§€ë§Œ **API Token ê¶Œì¥** |
