# 배포(Deployment) 방법과 종류

---

## 배포(Deployment)란?

> **배포(Deployment)**는 개발된 애플리케이션을 사용자가 접근할 수 있는 환경(프로덕션)에 설치하고 실행 가능하도록 하는 과정입니다.

---

## 배포 방식의 분류

### 1. 수동 배포 (Manual Deployment)

* 개발자가 직접 서버에 접속하여 코드를 배포
* 장점: 간단하고 즉시 적용 가능
* 단점: 실수 가능성, 일관성 부족, 시간 소요

### 2. 자동화 배포 (Automated Deployment)

* CI/CD 파이프라인을 통한 자동 배포
* 장점: 일관성, 빠른 배포, 롤백 용이
* 단점: 초기 설정 복잡

---

## CI/CD 파이프라인

### CI (Continuous Integration)

* 개발자들이 코드를 자주 통합하고 자동으로 빌드/테스트
* 예: GitHub Actions, GitLab CI, Jenkins

### CD (Continuous Delivery/Deployment)

* **Continuous Delivery**: 프로덕션 배포 전까지 자동화 (수동 승인 필요)
* **Continuous Deployment**: 프로덕션까지 완전 자동화

---

## 주요 배포 도구

| 도구 | 설명 | 특징 |
| ---- | ---- | ---- |
| **GitHub Actions** | GitHub 통합 CI/CD | 무료 플랜 제공, YAML 기반 |
| **GitLab CI** | GitLab 통합 CI/CD | 강력한 파이프라인 기능 |
| **Jenkins** | 오픈소스 자동화 서버 | 플러그인 확장성, 자체 서버 필요 |
| **Docker** | 컨테이너화 | 일관된 환경 보장 |
| **Kubernetes** | 컨테이너 오케스트레이션 | 대규모 배포, 자동 스케일링 |
| **Ansible** | 인프라 자동화 | SSH 기반, 에이전트리스 |
| **Terraform** | Infrastructure as Code | 클라우드 인프라 관리 |

---

## 배포 전략

배포 전략은 애플리케이션을 프로덕션 환경에 배포하는 방식을 결정하는 중요한 요소입니다. 각 전략은 서비스 가용성, 리소스 사용, 복잡도 등에서 차이가 있습니다.

### 1. Blue-Green 배포

**개념**: 동일한 환경을 두 개 구성(Blue: 기존, Green: 신규)하고, 트래픽을 한 번에 전환하는 방식

**특징**:
* 새 버전(Green)을 미리 준비하고 검증 후 전환
* 빠른 전환과 즉시 롤백 가능
* 다운타임 없음
* 리소스 비용이 높음 (두 환경 동시 운영)

**적용 사례**: 중요 서비스의 메이저 업데이트, 즉각적인 롤백이 필요한 경우

### 2. Canary 배포

**개념**: 신규 버전을 소수의 사용자나 서버에 먼저 배포하고, 점진적으로 비율을 늘려가는 방식

**특징**:
* 전체 트래픽의 5-10%로 시작하여 점진적 확대
* 실제 트래픽으로 검증 가능
* 문제 발생 시 소수 사용자에게만 영향
* 모니터링과 라우팅 로직이 복잡함

**적용 사례**: 대규모 프로덕션 환경, 사용자 경험에 민감한 서비스

### 3. Rolling 배포

**개념**: 기존 인스턴스를 하나씩 순차적으로 새로운 버전으로 교체하는 방식

**특징**:
* 한 번에 하나씩 교체하여 위험 분산
* 리소스 효율적 (동시에 두 환경 모두 운영 불필요)
* 업데이트 중 기존/신규 버전이 동시 실행
* Kubernetes 등에서 기본 지원

**적용 사례**: 컨테이너 기반 애플리케이션, 마이크로서비스 아키텍처

### 4. A/B 테스트 배포

**개념**: 두 버전을 동시에 운영하면서 사용자를 분할하여 각각 다른 버전을 사용하도록 하는 방식

**특징**:
* 데이터 기반 의사결정 가능
* 비즈니스 메트릭(전환율, 매출 등) 측정 가능
* 두 버전 동시 운영으로 리소스 사용 증가
* 충분한 데이터 수집 시간 필요

**적용 사례**: 새로운 UI/UX 테스트, 알고리즘 성능 비교

### 5. Recreate 배포

**개념**: 기존 버전을 완전히 중지한 후 새 버전을 배포하는 방식 (무중단 배포 아님)

**특징**:
* 가장 단순한 배포 방식
* 배포 중 서비스 중단 발생
* 전체 교체가 빠름
* 프로덕션에는 부적합

**적용 사례**: 개발/테스트 환경, 다운타임이 허용되는 서비스

---

상세한 무중단 배포 전략은 `05_무중단_배포_전략.md` 문서를 참고하세요.

---

## 배포 체크리스트

- [ ] 코드 버전 관리 (Git)
- [ ] 빌드 자동화 설정
- [ ] 테스트 자동화
- [ ] 환경 변수 관리
- [ ] 데이터베이스 마이그레이션
- [ ] 롤백 계획 수립
- [ ] 모니터링 및 로깅 설정
- [ ] 보안 검증 (SSL/TLS, 인증)

---

## 참고

* 배포는 반복적인 과정이므로 자동화가 중요합니다
* 환경(개발/스테이징/프로덕션) 분리가 필수입니다
* 배포 전 항상 백업을 수행하세요

